<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[2017-11-28-Vueçš„å¤šå¥—ç¯å¢ƒå‘å¸ƒè„šæœ¬]]></title>
      <url>/2017/11/28/2017-11-28-Vue%E7%9A%84%E5%A4%9A%E5%A5%97%E7%8E%AF%E5%A2%83%E5%8F%91%E5%B8%83%E8%84%9A%E6%9C%AC/</url>
      <content type="html"><![CDATA[<h2 id="éœ€æ±‚æ¥æº"><a href="#éœ€æ±‚æ¥æº" class="headerlink" title="éœ€æ±‚æ¥æº"></a>éœ€æ±‚æ¥æº</h2><p>é¡¹ç›®éœ€è¦éƒ¨ç½²å¤šå¥—ç¯å¢ƒæ¥å‘å¸ƒï¼ˆæµ‹è¯•ã€ç”Ÿäº§ï¼‰ï¼Œå¯¹äºé¡¹ç›®è€Œè¨€ç›®å‰åªæœ‰ä»£ç ä¸­åå°æ¥å£åœ°å€ä¸åŒï¼Œè¦æ±‚é¡¹ç›®åœ¨buildçš„æ—¶å€™èƒ½æ ¹æ®éœ€è¦buildæˆä¸åŒåå°æ¥å£çš„ç‰ˆæœ¬å»å‘å¸ƒï¼Œç›®å‰å’±åœ¨é¡¹ç›®é‡Œç”¨åˆ°çš„æ˜¯ä¸€ç§æœ€ç®€å•çš„åŠæ³•ï¼Œé’ˆå¯¹ä¸åŒçš„buildéœ€æ±‚ï¼Œå†™ä¸åŒçš„buildè„šæœ¬ï¼Œä»¥è¾¾åˆ°buildå‡ºä¸åŒç‰ˆæœ¬çš„ç›®çš„ã€‚</p>
<h2 id="åœ¨Vueé¡¹ç›®é‡Œå…·ä½“çš„å®ç°"><a href="#åœ¨Vueé¡¹ç›®é‡Œå…·ä½“çš„å®ç°" class="headerlink" title="åœ¨Vueé¡¹ç›®é‡Œå…·ä½“çš„å®ç°"></a>åœ¨Vueé¡¹ç›®é‡Œå…·ä½“çš„å®ç°</h2><p>Vueé¡¹ç›®ç”¨è¿‡<code>package.json</code>è¿™ä¸ªæ–‡ä»¶æ¥å®šä¹‰ä¸€ç»„npmè„šæœ¬ï¼š</p>
<pre><code class="Json">&quot;scripts&quot;: {
  &quot;dev&quot;: &quot;node build/dev-server.js&quot;,
  &quot;start&quot;: &quot;node build/dev-server.js&quot;,
  &quot;build&quot;: &quot;node build/build.js&quot;,
  &quot;unit&quot;: &quot;cross-env BABEL_ENV=test karma startest/unit/karma.conf.js --single-run&quot;,
  &quot;e2e&quot;: &quot;node test/e2e/runner.js&quot;,
  &quot;test&quot;: &quot;npm run unit &amp;&amp; npm run e2e&quot;,
  &quot;lint&quot;: &quot;eslint --ext .js,.vue srtest/unit/specs test/e2e/specs&quot;
},
</code></pre>
<p>è¯¥<code>scripts</code>å­—æ®µå®šä¹‰äº†7ä¸ªè„šæœ¬ï¼Œå¯ä»¥é€šè¿‡<code>npm run build</code>çš„æ–¹å¼æ¥è¿è¡Œ<code>node build/build.js</code>è¿™ä¸ªéƒ¨åˆ†ï¼Œnodejsæ”¯æŒä»ç¯å¢ƒå˜é‡ä¸­è¯»å–æŒ‡å®šå˜é‡çš„å€¼ï¼Œå…³äºè¿™ç‚¹åœ¨nodeå‘½ä»¤è¡Œä¸‹ä¹Ÿå¯ä»¥ç›´æ¥ä½“ç°ï¼Œé€šè¿‡<code>process.env</code>å¯ä»¥å¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„ç»“æœï¼š</p>
<pre><code>â•°$ node
&gt; process.env
{ 
  COLORFGBG: &#39;15;0&#39;,
  ITERM_PROFILE: &#39;natas&#39;,
  XPC_FLAGS: &#39;0x0&#39;,
  LANG: &#39;zh_CN.UTF-8&#39;,
  SHELL: &#39;/bin/zsh&#39;
}
</code></pre><p>é‚£ä¹ˆå¼€å¤´æåˆ°çš„éœ€æ±‚çš„å…·ä½“çš„å®ç°å°±å¾ˆç®€å•äº†ï¼Œåœ¨bashè„šæœ¬é‡Œè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨buildè„šæœ¬è¿è¡Œæ—¶è¯»å–ç¯å¢ƒå˜é‡çš„å€¼ä½œä¸ºbuildè¿è¡Œæ—¶çš„å€¼ï¼Œbuildå‡ºç¬¦åˆéœ€æ±‚çš„ç‰ˆæœ¬ã€‚</p>
<p>å…·ä½“çš„ä»£ç å¦‚ä¸‹</p>
<h3 id="æ–‡ä»¶åˆ—è¡¨"><a href="#æ–‡ä»¶åˆ—è¡¨" class="headerlink" title="æ–‡ä»¶åˆ—è¡¨"></a>æ–‡ä»¶åˆ—è¡¨</h3><ul>
<li>build_for_test.sh</li>
<li>conf/prod.env.js</li>
<li>src/api/api.js</li>
</ul>
<h4 id="build-for-test-sh"><a href="#build-for-test-sh" class="headerlink" title="build_for_test.sh"></a>build_for_test.sh</h4><pre><code>#!/bin/bash
mkdir nginx_web
# set nodeJs ENV
export NODE_ENV_API_ROOT=&quot;http://x.x.x.x:8000/panelApi/v1&quot;
export NODE_ENV_NAME=&quot;test&quot;

echo &quot;Build for test env&quot;
echo &quot;NODE_ENV_API_ROOT=&quot;${NODE_ENV_API_ROOT}
echo &quot;NODE_ENV_NAME=&quot;${NODE_ENV_NAME}

# re build
npm run build &amp;&amp; cp -R dist/* nginx_web/ &amp;&amp; chmod -R 755 nginx_web
</code></pre><h4 id="conf-prod-env-js"><a href="#conf-prod-env-js" class="headerlink" title="conf/prod.env.js"></a>conf/prod.env.js</h4><pre><code class="nodejs">exports.exports = {
  NODE_ENV: &#39;&quot;&#39; + process.env.NODE_ENV_NAME + &#39;&quot;&#39;,
  API_ROOT: &#39;&quot;&#39; + process.env.NODE_ENV_API_ROOT + &#39;&quot;&#39;
}
</code></pre>
<h4 id="src-api-api-js"><a href="#src-api-api-js" class="headerlink" title="src/api/api.js"></a>src/api/api.js</h4><pre><code>let baseUrl = process.env.API_ROOT
console.log(&#39;baseUrl&#39;, baseUrl)
export let axiosIns = axios.create({
  baseURL: baseUrl
})
</code></pre><p>è¿™æ ·ä¸€æ¥ï¼Œåœ¨è¿è¡Œ<code>build_for_test.sh</code>æ—¶ï¼Œç¯å¢ƒå˜é‡<code>NODE_ENV_API_ROOT</code>è¢«è®¾ç½®ä¸ºæœŸæœ›çš„å€¼ï¼Œåœ¨buildçš„è¿‡ç¨‹ä¸­ï¼Œ<code>require(&#39;conf/prod.env.js&#39;)</code>æ—¶å¯ä»¥ä»<code>process.env.NODE_ENV_API_ROOT</code>ä¸­è·å–åˆ°ç¯å¢ƒå˜é‡çš„å€¼ï¼Œbuildå®Œæˆåå‘å¸ƒçš„ç‰ˆæœ¬ä¸­ï¼Œ<code>src/api/api.js</code>æ–‡ä»¶é‡Œçš„<code>baseUrl</code>å€¼ä¾¿å¯ä»¥ä»<code>process.env.API_ROOT</code>ä¸­è·å–åˆ°ã€‚</p>
]]></content>
      
        
        <tags>
            
            <tag> Vue </tag>
            
            <tag> nodejs </tag>
            
            <tag> Bash </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[pythonç”¨é˜Ÿåˆ—å®ç°å¤šçº¿ç¨‹é—´çš„é€šä¿¡]]></title>
      <url>/2017/01/03/2017-01-03-python%E7%94%A8%E9%98%9F%E5%88%97%E5%AE%9E%E7%8E%B0%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1/</url>
      <content type="html"><![CDATA[<p>åœ¨å†™Pythonç½‘ç»œçˆ¬è™«çš„æ—¶å€™ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿçš„é—®é¢˜ï¼Œå•çº¿ç¨‹çš„çˆ¬è™«æ•ˆç‡å¾€å¾€ä¸å°½äººæ„ï¼Œæœ€ç®€å•çš„åŠæ³•æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œå¹¶å‘åœ°å»å‘é€è¯·æ±‚ï¼Œå¤šçº¿ç¨‹é—´çš„é€šä¿¡ä¹Ÿæ˜¯æŒºæœ‰æ„æ€çš„ï¼Œä¸‹é¢æ˜¯è‡ªå·±å†™çš„ä¸€æ®µç»ƒä¹ çš„ä»£ç </p>
<pre><code class="Python"># coding:utf-8
import Queue
import threading
import time
import random

q = Queue.Queue()  # çº¿ç¨‹é—´é€šä¿¡çš„é˜Ÿåˆ—
quit_flage = False  # ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ ‡è®°ç¨‹åºæ˜¯å¦è¯¥é€€å‡ºäº†

pq = Queue.Queue()  # ç”¨æ¥å­˜æ”¾printéœ€è¦è¾“å‡ºçš„æ¶ˆæ¯


# æ¨¡æ‹Ÿå·¥ä½œçº¿ç¨‹
def worker(id):
    while not (quit_flage and q.empty()):  # å½“é˜Ÿåˆ—ä¸ºç©ºä¸”é€€å‡ºæ ‡è®°ä¸ºTrueæ—¶ç»“æŸå¾ªç¯
        time.sleep(random.random())  # æš‚åœä¸€ä¸ªéšæœºçš„æ—¶é—´
        try:
            item = q.get(True, 0.1)  # ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œæœ€å¤šé˜»å¡0.1ç§’
        except Queue.Empty:  # é˜Ÿåˆ—ç©ºï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯
            continue
        que_print(&#39;%s get %s&#39; % (id, item))
        q.task_done()  # é˜Ÿåˆ—ä»»åŠ¡è®¡æ•°å™¨å‡ä¸€ï¼Œå’Œjoin()å‡½æ•°å¯¹åº”
    que_print(&#39;%s stop&#39; % id)


# å‘é˜Ÿåˆ—qä¸­åŠ å…¥å…ƒç´ 
def add_item(item):
    q.put(item)


# å‘æ‰“å°é˜Ÿåˆ—åŠ å…¥æ¶ˆæ¯ï¼Œç”¨æ¥print
def que_print(msg):
    pq.put(msg)


# ä»æ‰“å°é˜Ÿåˆ—ä¸­å–å‡ºå¾…æ‰“å°çš„æ¶ˆæ¯
def que_print_thread():
    print &#39;start pq&#39;
    while not (quit_flage and pq.empty()):  # å½“é˜Ÿåˆ—ä¸ºç©ºä¸”é€€å‡ºæ ‡è®°ä¸ºTrueæ—¶ç»“æŸå¾ªç¯
        try:
            msg = pq.get(True, 0.1)  # ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ ï¼Œæœ€å¤šé˜»å¡0.1ç§’
        except Queue.Empty:  # é˜Ÿåˆ—ç©ºï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯
            continue
        print msg


[add_item(i) for i in &#39;qwertyuiopasdfghjkl&#39;]  # å‘é˜Ÿåˆ—ä¸­åŠ äº›ä¸œè¥¿

[threading.Thread(target=worker, kwargs={&#39;id&#39;: i}).start() for i in range(5)]  # å¼€å¯5ä¸ªwokerçº¿ç¨‹
threading.Thread(target=que_print_thread).start()  # å¼€å¯printé˜Ÿåˆ—
print &#39;wating job...&#39;
q.join()  # å’Œtask_done()å¯¹åº”ï¼Œé˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è®¡æ•°å™¨å½’é›¶ï¼Œè®¡æ•°å™¨åœ¨put()å+1ï¼Œå’Œtask_done()å-1
print &#39;job finished&#39;
quit_flage = True  # è®¾ç½®é€€å‡ºæ ‡è®°ä¸ºTrueï¼Œå„ä¸ªçº¿ç¨‹ä¼šåœ¨æ ‡è®°ä¸ºTrueçš„æ—¶å€™é€€å‡º
</code></pre>
<p>ç¨‹åºè¿è¡Œç»“æœ</p>
<pre><code>wating job...
start pq

1 get q
4 get w
3 get e
4 get r
2 get t
1 get y
0 get u
3 get i
2 get o
1 get p
4 get a
4 get s
3 get d
3 get f
0 get g
4 get h
1 get j
2 get k
job finished
1 get l

Process finished with exit code 0
</code></pre><p>ç¨‹åºä¸­ä¸ºä»€ä¹ˆè¦åŠ ä¸€ä¸ªæ‰“å°é˜Ÿåˆ—å‘¢ï¼Ÿå› ä¸ºå› ä¸ºå¤šçº¿ç¨‹åŒæ—¶å‘stdoutè¾“å‡ºä¿¡æ¯çš„è¯ï¼Œä¿¡æ¯æµçœ‹èµ·æ¥ä¼šæ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼Œæ‰€ä»¥è¿˜æ˜¯å†™äº†ä¸€ä¸ªç”¨æ¥è¾“å‡ºæ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚</p>
<pre><code>start pq
wating job...

1 get q
1 get w
4 get e3 get r
0 get t
2 get y2 get u
 4 get i
2 get o
1 get p
1 get a
4 get s0 get d
3 get f
0 get g
1 get h2 get j
2 get k
2 get l
job finished

Process finished with exit code 0
</code></pre>]]></content>
      
        
        <tags>
            
            <tag> Python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç”¨supervisoræ¥ç®¡ç†tcptunçš„å¤šä¸ªç­–ç•¥]]></title>
      <url>/2016/12/28/2016-12-28-%E7%94%A8supervisor%E6%9D%A5%E7%AE%A1%E7%90%86tcptun%E7%9A%84%E5%A4%9A%E4%B8%AA%E7%AD%96%E7%95%A5/</url>
      <content type="html"></content>
      
        
        <tags>
            
            <tag> Linux </tag>
            
            <tag> supervisor </tag>
            
            <tag> tcptun </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ç»ˆç«¯ä¸‹æ¥è‡ªFBIçš„é—®å€™]]></title>
      <url>/2016/11/22/2016-11-22-%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%9D%A5%E8%87%AAFBI%E7%9A%84%E9%97%AE%E5%80%99/</url>
      <content type="html"><![CDATA[<p>å…ˆä¸Šæ•ˆæœå›¾</p>
<img src="/2016/11/22/2016-11-22-ç»ˆç«¯ä¸‹æ¥è‡ªFBIçš„é—®å€™/fbi_warning01.png" title="resImghere">
<p>åœ¨çŒ¥çåŒå­¦çš„å¯å‘ä¸‹ï¼Œæ‰“ç®—æŠŠçˆ±æƒ…åŠ¨ä½œå¤§ç‰‡çš„ç‰‡å¤´æ”¾åˆ°ç»ˆç«¯çš„å­—ç¬¦ç•Œé¢ä¸‹ï¼Œ233ï¼Œä¾¿ç®€å•å†™äº†ä¸€ä¸ªbashè„šæœ¬ï¼Œæ”¾åˆ°<code>~/.zshrc</code>é‡Œé¢ä¾¿å¯ï¼Œæ¯æ¬¡æ‰“å¼€ç»ˆç«¯éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥ä¸€ä¸ª<code>FBI WARNING</code>ï¼Œå“ˆå“ˆã€‚</p>
<h3 id="é™„ä¸Šä»£ç "><a href="#é™„ä¸Šä»£ç " class="headerlink" title="é™„ä¸Šä»£ç "></a>é™„ä¸Šä»£ç </h3><pre><code class="Bash">    function bash_center_print {
        strlen=${#1}
        blanklen=$(((COLUMNS - strlen) / 2))
        echo &quot;$(tput cuf $blanklen) $1&quot;
    }

    function bash_center_print_red {
        strlen=${#1}
        blanklen=$(((COLUMNS - strlen) / 2))
        echo &quot;$(tput cuf $blanklen) $(tput setab 1)$1$(tput sgr 0)&quot;
    }

    bash_center_print_red &quot;FBI WARNING&quot;
    echo &quot;&quot;
    bash_center_print &quot;Federal Law provides severe civil and criminal penalties for &quot;
    bash_center_print &quot;the unauthorized reproduction, distribution, or exhibition of&quot;
    bash_center_print &quot;copyrighted motion pictures (Title 17, United States Code,   &quot;
    bash_center_print &quot;Sections 501 and 508). The Federal Bureau of Investigation   &quot;
    bash_center_print &quot;investigates allegations of criminal copyright infringement  &quot;
    bash_center_print &quot;(Title 17, United States Code, Section 506).&quot;
</code></pre>
<h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>å…¶ä¸­ç”¨<code>COLUMNS</code>æ¥è·å–åˆ°å­—ç¬¦ç»ˆç«¯çš„å®½åº¦ï¼Œè®¡ç®—ä¸€ä¸‹å±…ä¸­çš„ç•™ç™½éƒ¨åˆ†é•¿åº¦ï¼Œç”¨<code>tput cuf</code>æ¥å®ç°å±…ä¸­ï¼Œå…³äº<code>FBI WARNING</code>é‚£ä¸€è¡Œç”¨çº¢è‰²èƒŒæ™¯æ‰“å°ç”¨åˆ°äº†<code>tput setab</code>æ¥è®¾ç½®äº†èƒŒæ™¯è‰²ã€‚</p>
<p>Github <a href="https://github.com/zhaohui8969/FBI_WARNING" target="_blank" rel="noopener">https://github.com/zhaohui8969/FBI_WARNING</a></p>
]]></content>
      
        
        <tags>
            
            <tag> æ¶æ </tag>
            
            <tag> bash </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[å¦‚ä½•ç”¨Pythonå¿«é€Ÿæ’¸å‡ºä¸€ä¸ªè´´å§å›¾ç‰‡ä¸‹è½½å™¨]]></title>
      <url>/2016/04/23/2016-04-23-%E5%A6%82%E4%BD%95%E7%94%A8Python%E5%BF%AB%E9%80%9F%E6%92%B8%E5%87%BA%E4%B8%80%E4%B8%AA%E8%B4%B4%E5%90%A7%E5%9B%BE%E7%89%87%E4%B8%8B%E8%BD%BD%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ç¯‡å…³äºè‡ªå·±å†™è´´å§å›¾ç‰‡ä¸‹è½½å™¨çš„æ€»ç»“ã€‚<br>ã€€<br>èµ·åˆæ˜¯å®¤å‹è¯´è¦åšä¸€ä¸ªè´´å§çš„ä¿¡æ¯æ”¶é›†çˆ¬è™«ï¼Œäºæ˜¯æ‰“ç®—å…ˆä»ç®€å•ä¸€ç‚¹çš„å¼€å§‹ï¼Œå…ˆåšä¸€ä¸ªè´´å§çš„å›¾ç‰‡ä¸‹è½½å§ï¼Œä¹‹åå†æŠŠè·å–å›¾ç‰‡æ”¹æˆè·å–èƒŒçš„å†…å®¹ä¸å°±å¥½äº†å˜›ğŸ˜„ï¼Œç„¶åå°±å¼€å§‹å†™äº†è¿™ä¸ªçˆ¬è™«ã€‚ç°åœ¨è¿™ä¸ªPythonè„šæœ¬ä¸»è¦ç”¨åˆ°äº†ä¸‹é¢çš„ä¸€äº›ä¸œè¥¿ã€‚
ã€€    </p>
<h3 id="ç”¨åˆ°çš„Pythonæ¨¡å—"><a href="#ç”¨åˆ°çš„Pythonæ¨¡å—" class="headerlink" title="ç”¨åˆ°çš„Pythonæ¨¡å—"></a>ç”¨åˆ°çš„Pythonæ¨¡å—</h3><ul>
<li>requestsï¼ˆPythonä¸‹çš„HTTPå®¢æˆ·ç«¯å®ç°ï¼‰</li>
<li>BeautifulSoupï¼ˆä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„htmlè¯­æ³•åˆ†æå·¥å…·ï¼‰</li>
<li>coloramaï¼ˆåœ¨æ§åˆ¶å°è¾“å‡ºå½©è‰²çš„</li>
<li>threadingï¼ˆæˆ‘ç”¨åˆ°äº†å¤šçº¿ç¨‹çš„ä¸€äº›ä¸œè¥¿ï¼‰</li>
<li>signalï¼ˆPythonä¸‹å’Œä¿¡å·ç›¸å…³çš„ä¸œè¥¿ï¼‰</li>
<li>OptionParserï¼ˆå¾ˆæ–¹ä¾¿çš„å‘½ä»¤è¡Œå‚æ•°é…ç½®å·¥å…·ï¼‰</li>
<li>threadpoolï¼ˆä¸€ä¸ªèŠè‹£å†™çš„Pythonçº¿ç¨‹æ± å®ç°ï¼‰</li>
</ul>
<h3 id="åŸç†çš„éƒ¨åˆ†"><a href="#åŸç†çš„éƒ¨åˆ†" class="headerlink" title="åŸç†çš„éƒ¨åˆ†"></a>åŸç†çš„éƒ¨åˆ†</h3><p>å…¶å®æ€è·¯å¾ˆç®€å•ï¼Œéšä¾¿æ‰¾ä¸€ä¸ªå¸–å­ï¼Œæ¯”å¦‚è¿™ä¸ª<a href="http://tieba.baidu.com/p/2545680017" target="_blank" rel="noopener">http://tieba.baidu.com/p/2545680017</a>ï¼Œè¿™æ˜¯ä¸€ä¸ªå›¾æ¥¼ï¼Œç„¶åå°±éœ€è¦åˆ†æé¡µé¢çš„HTMä»£ç å†…å®¹ï¼Œæˆ‘ç”¨çš„æ˜¯Chromeæµè§ˆå™¨ï¼Œé‚£å°±å³é”®é€‰æ‹©ä¸€ä¸ªæ¥¼å±‚çš„å›¾ç‰‡ï¼Œ<code>å®¡æŸ¥å…ƒç´ </code>ï¼Œç„¶åå‘ç°HTMLä»£ç ä¸­æ˜¯è¿™æ ·å†™çš„ï¼š
ã€€    </p>
<pre><code class="HTML">&lt;img class=&quot;BDE_Image&quot; src=&quot;http://imgsrc.baidu.com/forum/w%3D580/sign=198d73cadc54564ee565e43183dc9cde/857f1f1f95cad1c8f75fb3fe7e3e6709c83d5130.jpg&quot; pic_ext=&quot;jpeg&quot; width=&quot;550&quot; height=&quot;600&quot;&gt;
</code></pre>
<p>ã€€<br>å¯ä»¥çœ‹åˆ°é‡Œé¢<code>src</code>éƒ¨åˆ†ç›´æ¥æ˜¯å›¾ç‰‡çš„åœ°å€ï¼Œå†è§‚å¯Ÿæ¥¼å±‚å›¾ç‰‡å’Œå…¶ä»–æ— å…³ç´§è¦çš„å›¾ç‰‡ï¼ˆæ¯”å¦‚å±‚ä¸»å¤´åƒã€ç­¾åæ¡£ï¼‰çš„å†™æ³•åŒºåˆ«ï¼Œå‘ç°æ¥¼å±‚å›¾ç‰‡éƒ½ä¼šæœ‰ä¸€ä¸ª<code>BDE_Image</code>classï¼Œé‚£ä¹ˆè¿™å°±å¥½åŠäº†ï¼Œç­‰ä¼šç›´æ¥ç­›é€‰å‡ºæ¥å°±å¥½ã€‚</p>
<p>ç„¶åç¿»åˆ°å¸–å­çš„ç¬¬äºŒé¡µï¼Œå‘ç°URLå˜æˆäº†<a href="http://tieba.baidu.com/p/2545680017?pn=2" target="_blank" rel="noopener">http://tieba.baidu.com/p/2545680017?pn=2</a>ï¼Œå¤šäº†ä¸€ä¸ª<code>?pn=2</code>ï¼Œè¿™ä¸ª<code>pn</code>å‚æ•°ä¹Ÿå°±è¡¨ç¤ºäº†å½“å‰æŸ¥çœ‹çš„é¡µæ•°ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦çŸ¥é“å¸–å­æ€»å…±æœ‰å¤šå°‘é¡µï¼Œå¯¹<code>pn</code>åšä¸€ä¸ªéå†å°±å¯ä»¥è·å¾—ä¸€ä¸ªå¸–å­ä¸­æ‰€æœ‰é¡µé¢äº†ï¼Œç°åœ¨éœ€è¦çŸ¥é“æ€ä¹ˆè·å–å¸–å­çš„æ€»é¡µé¢æ•°ã€‚ç›´æ¥æ¥åˆ°å¸–å­çš„æœ€åº•éƒ¨ï¼Œçœ‹åˆ°äº†è¿™æ ·çš„å†…å®¹<code>62å›å¤è´´ï¼Œå…±3é¡µ</code>ï¼Œå¯¹åº”çš„HTMLä»£ç ä¸ºï¼š
ã€€    </p>
<pre><code class="HTML">&lt;li class=&quot;l_reply_num&quot; style=&quot;margin-left:8px&quot;&gt;&lt;span class=&quot;red&quot; style=&quot;margin-right:3px&quot;&gt;62&lt;/span&gt;å›å¤è´´ï¼Œå…±&lt;span class=&quot;red&quot;&gt;3&lt;/span&gt;é¡µ&lt;/li&gt;
</code></pre>
<p>ã€€<br>ç‰¹å¾å¾ˆæ˜æ˜¾ï¼Œæœ‰ä¸€ä¸ªå«åš<code>l_reply_num</code>çš„classï¼Œæ€»å›å¸–æ•°å’Œæ€»é¡µæ•°éƒ½å„ç”¨ä¸€ä¸ªsapnæ ‡ç­¾åŒ…èµ·æ¥äº†ï¼Œç­‰ä¼šç›´æ¥è¿‡æ»¤å‡ºæ¥å°±å¯ä»¥ã€‚</p>
<p>ç°åœ¨å¯¹ç½‘é¡µéƒ¨åˆ†çš„åˆ†æç®—æ˜¯ç»“æŸäº†ï¼Œåˆ°äº†ä»£ç å®ç°çš„éƒ¨åˆ†äº†ã€‚</p>
<h3 id="è¿™é‡Œè´´å‡ºéƒ¨åˆ†ä»£ç "><a href="#è¿™é‡Œè´´å‡ºéƒ¨åˆ†ä»£ç " class="headerlink" title="è¿™é‡Œè´´å‡ºéƒ¨åˆ†ä»£ç "></a>è¿™é‡Œè´´å‡ºéƒ¨åˆ†ä»£ç </h3><pre><code class="Python"># ç”¨requestsæ¨¡å—ç›´æ¥è·å–ç½‘é¡µçš„HTMLå†…å®¹
getparams = {&#39;pn&#39;: 1}
result_ = requests.get(&#39;http://tieba.baidu.com/p/2545680017?&#39;, params=getparams).content
</code></pre>
<pre><code class="Python"># ç”¨BeautifulSoupæ¨¡å—åšHTMLå†…å®¹çš„åˆ†æï¼Œè·å–æ€»é¡µæ•°
soup = BeautifulSoup(result_, &#39;lxml&#39;)
page_list = soup.find(&#39;li&#39;, attrs={&#39;class&#39;: &#39;l_reply_num&#39;})
max_page_number = int(page_list.contents[2].string)  # æ€»é¡µæ•°
</code></pre>
<pre><code class="Python"># åœ¨pnå¤„åšä¸€ä¸ªéå†ï¼Œè·å–åˆ°å¸–å­çš„æ‰€æœ‰é¡µé¢
for pageNum in range(start, end):
    getparams = {&#39;pn&#39;: pageNum}
    html_cont = requests.get(self.pURL, params=getparams).content
    soup = BeautifulSoup(html_cont, &#39;lxml&#39;)
    # ç”¨BeautifulSoupæ¨¡å—åšHTMLå†…å®¹çš„åˆ†æï¼Œè·å–åˆ°æ‰€æœ‰æ¥¼å±‚å›¾ç‰‡çš„ä¸‹è½½åœ°å€
    # å¹¶å‘é€åˆ°ä¸‹è½½é˜Ÿåˆ—
    for item in soup.findAll(&#39;img&#39;, attrs={&#39;class&#39;: &quot;BDE_Image&quot;}):
        srcurl = item.get(&#39;src&#39;)  # å›¾ç‰‡åœ°å€
        if not self._is_Exit:
            self.downloader.add_task(srcurl)
</code></pre>
<pre><code class="Python"># ä¸‹è½½å™¨é‡Œç”¨threadpoolæ¨¡å—åšå¤šçº¿ç¨‹çš„å¹¶å‘ä¸‹è½½ï¼Œè¿™æ ·é€Ÿåº¦æ¯”å•çº¿ç¨‹å¿«å¾ˆå¤š
def add_task(self, url):
    with self.lock:
        self._is_alive = True
    reqs = threadpool.makeRequests(self._download, [url, ], self._callback)
    [self.threadPool.putRequest(req, timeout=1) for req in reqs]
</code></pre>
<pre><code class="Python"># ç›´æ¥ç”¨requestsæ¨¡å—å®Œæˆå›¾ç‰‡çš„ä¸‹è½½ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶
def _download(self, url):
    if self.is_alive():
        r = requests.request(&#39;GET&#39;, url)
        if r:
            filename = os.path.join(self.save_directory, os.path.basename(url))  # æ‹¼æ¥æ–‡ä»¶å
            if not os.path.exists(filename):
                with open(filename, &#39;wb&#39;) as f:
                    f.write(r.content)  # ä¿å­˜å›¾ç‰‡
                return 1
            else:
                return -1
    else:
        return None
</code></pre>
<h3 id="é€Ÿåº¦è¿˜ä¸é”™"><a href="#é€Ÿåº¦è¿˜ä¸é”™" class="headerlink" title="é€Ÿåº¦è¿˜ä¸é”™"></a>é€Ÿåº¦è¿˜ä¸é”™</h3><p>ã€€<br><img src="/2016/04/23/2016-04-23-å¦‚ä½•ç”¨Pythonå¿«é€Ÿæ’¸å‡ºä¸€ä¸ªè´´å§å›¾ç‰‡ä¸‹è½½å™¨/tiebaImageGet-010.png" title="resImghere"></p>
<h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>åˆ°è¿™é‡Œå…¶å®å…³é”®çš„éƒ¨åˆ†ä¹Ÿå°±ç»“æŸäº†ï¼Œå‰©ä¸‹çš„ä¸€äº›å¾®å°çš„å·¥ä½œï¼Œæ¯”å¦‚è¾“å‡ºç»Ÿè®¡ç»“æœï¼ˆä¸‹äº†å¤šå°‘å›¾ï¼Œç”¨äº†å¤šå°‘æ—¶é—´ï¼Œæ”¯æŒè®¾ç½®ä¿å­˜ç›®å½•ã€‚ã€‚ã€‚ï¼‰ï¼Œå„ä½çœ‹å®˜æ„Ÿå…´è¶£çš„è¯å¯ä»¥ç›´æ¥å»æˆ‘çš„Githubä¸Šçœ‹æºç ã€‚</p>
<p>Github <a href="https://github.com/zhaohui8969/tiebaImageGet" target="_blank" rel="noopener">https://github.com/zhaohui8969/tiebaImageGet</a></p>
]]></content>
      
        
        <tags>
            
            <tag> Python </tag>
            
            <tag> è´´å§ </tag>
            
            <tag> Image </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿]]></title>
      <url>/2016/02/23/2016-02-23-%E5%9C%A8OSX%E4%B8%8A%E7%94%A8automator%E5%AE%9E%E7%8E%B0VPN%E6%96%AD%E7%BA%BF%E8%87%AA%E5%8A%A8%E9%87%8D%E8%BF%9E/</url>
      <content type="html"><![CDATA[<p>ã€€ã€€ç”±äºæŸäº›åŸå› ï¼Œå¹³æ—¶éœ€è¦ä½¿ç”¨åˆ°VPNï¼Œä½†æ˜¯å’Œè¿™ä¸ªæœåŠ¡å™¨ä¹‹é—´çš„é“¾è·¯å‘¢æ€»æ˜¯æœ‰äº›ä¸ç¨³å®šï¼Œç»å¸¸ä¼šæ–­æ‰ï¼Œç„¶è€ŒOSXç½‘ç»œè®¾ç½®é¢æ¿æ²¡æœ‰æ‰¾åˆ°è‡ªåŠ¨é‡æ’­çš„é€‰é¡¹ï¼Œè€Œä¸”æœ‰æ—¶è¿™ä¸ªè¿æ¥åªæ˜¯å‡æ­»ï¼Œå°±æ˜¯è¿˜æ˜¾ç¤ºçŠ¶æ€æ˜¯è¿æ¥ä¸Šçš„ï¼Œä½†æ˜¯å°±æ˜¯æ²¡æœ‰æµé‡ï¼Œå¾—é‡æ’­ã€‚å¯æ˜¯æ‰‹å·¥å»é‡æ’­çš„è¯å¾ˆéº»çƒ¦ï¼Œä¹‹å‰æœ‰è¯•è¿‡åœ¨è·¯ç”±å™¨ä¸Šå†™è¿‡pythonè„šæœ¬æ¥å®ç°é“¾è·¯è¿é€šçŠ¶å†µæ£€æµ‹è‡ªåŠ¨é‡æ’­çš„è„šæœ¬ï¼Œä¸è¿‡åæ¥å‘¢ï¼Œé‚£ä¸ªè·¯ç”±å™¨é€€å½¹äº†ï¼Œç°åœ¨åœ¨OSXå¹³å°ä¸‹æƒ³å¯»æ‰¾åˆ°ç±»ä¼¼çš„è§£å†³åŠæ³•ï¼ŒGoogleäº†è§£åˆ°OSXä¸‹æœ‰automatorè¿™æ ·çš„ç¥å™¨ã€‚å€’è…¾äº†ä¸€ä¼šè§£å†³äº†é—®é¢˜ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸‹æ¥ã€‚</p>
<p>ã€€ã€€é¦–å…ˆæ‰“å¼€automatorï¼Œä»–æ˜¯è¿™ä¸ªæ ·å­çš„ï¼šã€€ã€€</p>
<img src="/2016/02/23/2016-02-23-åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿/l2bf-010.png" title="img1">
<p>ç„¶åæˆ‘ä»¬è¦åˆ¶ä½œä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå°±åƒè¿™æ ·ï¼š</p>
<img src="/2016/02/23/2016-02-23-åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿/l2bf-020.png" title="img2">
<p>åœ¨â€œèµ„æ–™åº“â€ä¸­é€‰æ‹©â€œå®ç”¨å·¥å…·â€åˆ†æ ï¼Œæ‰¾åˆ°â€œè¿è¡Œ AppleScriptâ€è¿™ä¸ªä¸œè¥¿ï¼Œæ‹–åˆ°å³è¾¹ï¼Œç„¶åæˆ‘ä»¬çš„ä»£ç ç¼–è¾‘åŒºå°±å‡ºç°äº†ï¼Œä¹‹åçš„æ‰€æœ‰ä»£ç éƒ½å†™åœ¨è¿™é‡Œï¼š</p>
<img src="/2016/02/23/2016-02-23-åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿/l2bf-030.png" title="img3">
<p>ç„¶åæƒ³æƒ³æˆ‘éœ€è¦å®ç°ä»€ä¹ˆï¼Œé¦–å…ˆéœ€è¦å®ç°æ§åˆ¶VPNè¿æ¥çš„åŠ¨ä½œï¼ŒGoogleåˆ°ç›¸å…³çš„èµ„æ–™ï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code class="python">tell application &quot;System Events&quot;
    tell network preferences
        disconnect service &quot;L2BF&quot;
        connect service &quot;L2BF&quot;
    end tell
end tell
</code></pre>
<p>è¿™æ®µæ„æ€å‘¢å°±æ˜¯å‘Šè¯‰â€System Eventsæ¨¡å—â€ï¼ˆæˆ‘å«ä»–æ¨¡å—ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹ï¼‰é‡Œé¢çš„â€network preferencesæ¨¡å—â€ï¼šæˆ‘è¦æ–­å¼€ä¸€ä¸ªå«L2BFçš„è¿æ¥ï¼Œç„¶åé‡è¿ä¸€ä¸‹ï¼Œè¿™é‡Œæµ‹è¯•ç»“æœæ²¡æœ‰é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆä¸‹ä¸€ä¸ªéƒ¨åˆ†å°±æ˜¯ç½‘ç»œçš„çŠ¶æ€ç›‘æµ‹éƒ¨åˆ†ï¼Œè¿™é‡Œå‘¢æˆ‘æƒ³åˆ°çš„æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ç”¨pingå‘½ä»¤æ£€æµ‹ï¼Œç„¶åæˆ‘å°±æ‰¾åˆ°ä¸€ä¸ªåœ¨AppleScripté‡Œè¿è¡Œpythonç¨‹åºçš„åŠæ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="python">do shell script &quot;ping -c 1 -W 3000 baidu.com&quot;
</code></pre>
<p>è¿™æ ·å°±å®Œæˆäº†ä¸€æ¡pythonâ€è¯­å¥.â€æ‰§è¡Œï¼Œå¯¹baidu.comå‘ä¸€ä¸ªpingåŒ…ï¼Œ3000ç§’è¶…æ—¶ã€‚ç„¶åå°±æ˜¯å…³äºé€»è¾‘åˆ¤æ–­çš„éƒ¨åˆ†äº†ï¼Œæ‰¾åˆ°äº†è¿™äº›æˆ‘éœ€è¦çš„éƒ¨åˆ†:</p>
<h3 id="Try-catchè¯­å¥"><a href="#Try-catchè¯­å¥" class="headerlink" title="Try catchè¯­å¥"></a>Try catchè¯­å¥</h3><pre><code class="python">try
    {&quot;è¯­å¥.&quot;}
on error
    {&quot;è¯­å¥.&quot;}
end try
</code></pre>
<h3 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h3><pre><code class="python">repeat
    {&quot;è¯­å¥.&quot;}
end repeat
</code></pre>
<p>å½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æœ‰å¾ªç¯é™„åŠ æ¡ä»¶ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="python">repeat 2 times
repeat with counter from 1 to 3
repeat while counter â‰  10
repeat until counter = 10
repeat with å•ä¸ªå…ƒç´  in é›†åˆ
</code></pre>
<h3 id="åˆ¤æ–­è¯­å¥"><a href="#åˆ¤æ–­è¯­å¥" class="headerlink" title="åˆ¤æ–­è¯­å¥"></a>åˆ¤æ–­è¯­å¥</h3><p>ä¹Ÿå°±ç±»ä¼¼è¿™æ ·</p>
<pre><code class="python">if flag = 0 then
    {&quot;è¯­å¥.&quot;}
else if flag = -1 then
    {&quot;è¯­å¥.&quot;}
end if
</code></pre>
<h3 id="å˜é‡ä»€ä¹ˆçš„"><a href="#å˜é‡ä»€ä¹ˆçš„" class="headerlink" title="å˜é‡ä»€ä¹ˆçš„"></a>å˜é‡ä»€ä¹ˆçš„</h3><pre><code class="python">set flag to 0
</code></pre>
<p>ç„¶åä»£ç å°±è¿™æ ·å†™å‡ºæ¥äº†ï¼š</p>
<pre><code class="python">on run {input, parameters}

    set flag to 0
    repeat
        try
            do shell script &quot;ping -c 1 -W 3000 baidu.com&quot;
            delay 30
        on error
            beep
            tell application &quot;System Events&quot;
                tell network preferences
                    disconnect service &quot;L2BF&quot;
                    connect service &quot;L2BF&quot;
                end tell
            end tell
            delay 5
        end try
    end repeat

    return input
end run
</code></pre>
<p>æ¯éš”30ç§’æ£€æµ‹ä¸€ä¸‹è¿é€šæ€§ï¼Œå‡ºç°é—®é¢˜å°±é‡æ‹¨ä¸€ä¸‹ï¼Œçœ‹èµ·æ¥å¾ˆä¸é”™ï¼Œç‚¹ä¸€ä¸‹è¿™ä¸ªæŒ‰é’®æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p>ç»“æœå¾ˆä¸é”™ï¼Œè‡³å°‘æˆ‘æŠŠè¿æ¥æ–­æ‰ä»–èƒ½è‡ªåŠ¨ç»™æˆ‘è¿ä¸Šã€‚åˆ°è¿™é‡Œå°±åŠŸå¾·åœ†æ»¡äº†å—ï¼Ÿä¸ä¸ä¸ï¼Œåœ¨æŸ¥æ‰¾èµ„æ–™çš„è¿‡ç¨‹ä¸­æˆ‘çœ‹åˆ°äº†è¿™ä¸ªé€¼æ ¼å¾ˆé«˜çš„ä¸œè¥¿ï¼Œæœ‰äººåœ¨ä»£ç é‡Œå†™äº†ä¸€å¥è¿™ä¸ª:</p>
<pre><code class="python">say &quot;Good~&quot;
</code></pre>
<p>æˆ‘ä¹Ÿè¯•äº†ä¸€ä¸‹ï¼Œå½“æ—¶å°±æ‡µé€¼äº†ï¼Œè¿™è¿˜èƒ½è¯­éŸ³è¯´è¯ã€‚ã€‚ã€‚ç„¶åå°±æ‰“ç®—æé«˜ä¸€ä¸‹è¿™ä¸ªç¨‹åºçš„é€¼æ ¼ï¼ŒåŠ å…¥è¯­éŸ³çš„éƒ¨åˆ†ï¼Œè¿˜å»ç³»ç»Ÿè¯­éŸ³é‡Œé¢é€‰äº†ä¸€ä¸ªä¸é”™çš„å¥³å£°Vickiï¼š</p>
<p>åŠ äº†è¯­éŸ³å’Œæç¤ºéŸ³åçš„ç¨‹åºä»£ç ï¼š</p>
<pre><code class="python">on run {input, parameters}

    say &quot;Demon started.&quot;
    set flag to 0
    repeat
        try
            do shell script &quot;ping -c 1 -W 3000 baidu.com&quot;
            if flag = 0 then
                say &quot;Connected.&quot;
            else if flag = -1 then
                say &quot;Reconnected!&quot;
            end if
            set flag to 1
            delay 10
        on error
            beep
            set flag to -1
            say &quot;Connection error! Try reconnect...&quot;
            tell application &quot;System Events&quot;
                tell network preferences
                    disconnect service &quot;L2BF&quot;
                    connect service &quot;L2BF&quot;
                end tell
            end tell
            delay 5
        end try
    end repeat

    return input
end run
</code></pre>
<p>è¿è¡Œä¹‹åè¿˜æœ‰è¯­éŸ³æç¤ºï¼Œ666.</p>
<h3 id="æ ‡å‡†ç»“å±€"><a href="#æ ‡å‡†ç»“å±€" class="headerlink" title="æ ‡å‡†ç»“å±€"></a>æ ‡å‡†ç»“å±€</h3><p>Goodï¼ç„¶ååœ¨Spotlighté‡Œæœç´¢ç¨‹åºä¾¿å¯ä»¥ç›´æ¥æ‰“å¼€ï¼š</p>
<img src="/2016/02/23/2016-02-23-åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿/l2bf-040.png" title="img4">
<p>è¿è¡Œä¹‹ååœ¨é¡¶æ ä¼šæœ‰è¿™æ ·ä¸€ä¸ªå°é½¿è½®ï¼Œç‚¹å‡»å¯ä»¥é€‰æ‹©é€€å‡ºï¼š</p>
<img src="/2016/02/23/2016-02-23-åœ¨OSXä¸Šç”¨automatorå®ç°VPNæ–­çº¿è‡ªåŠ¨é‡è¿/l2bf-050.png" title="img5">
<p>æœ€åé™„ä¸Šä¸€äº›èµ„æ–™ç«™ï¼š</p>
<ul>
<li><a href="https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html" target="_blank" rel="noopener">AppleScript Language Guide</a></li>
<li><a href="https://developer.apple.com/search/" target="_blank" rel="noopener">https://developer.apple.com/search/</a></li>
</ul>
<p>Over</p>
]]></content>
      
        
        <tags>
            
            <tag> Automator </tag>
            
            <tag> OSX </tag>
            
        </tags>
        
    </entry>
    
  
  
    
  
</search>
